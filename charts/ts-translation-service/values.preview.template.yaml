java:
  # Don't modify below here
  image: ${IMAGE_NAME}
  ingressHost: ${SERVICE_FQDN}
  environment:
    TS_TRANSLATION_SERVICE_DB_HOST: "{{ .Release.Name }}-postgresql"
    TS_TRANSLATION_SERVICE_DB_NAME: "ccd"
    TS_TRANSLATION_SERVICE_DB_USERNAME: "hmcts"
    TS_TRANSLATION_SERVICE_DB_PASSWORD: "hmcts"
    TS_TRANSLATION_SERVICE_DB_OPTIONS: "?stringtype=unspecified"
    TS_TRANSLATION_SERVICE_DB_PORT: 5432
    TESTING_SUPPORT_ENABLED: true

  keyVaults:
    ts:
      resourceGroup: ts-shared
      secrets:
        - name: AppInsightsInstrumentationKey
        - name: ts-translation-service-s2s-secret
          alias: IDAM_KEY_TS_TRANSLATION_SERVICE

ccd:
  enabled: true
  ccd:
    s2s:
      enabled: false
    userProfile:
      enabled: false
    dataStore:
      enabled: false
    definitionImporter:
      enabled: false
    userProfileImporter:
      enabled: true
    ras:
      enabled: false
    postgresql:
      enabled: true
      primary:
        initdb:
          scripts:
            init.sql: |
              CREATE DATABASE "data-store" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
              CREATE DATABASE "definition-store" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
              CREATE DATABASE "user-profile" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
              CREATE DATABASE "draftstore" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
              CREATE DATABASE "payment" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
              CREATE DATABASE "evidence" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
              CREATE DATABASE "annotation" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
              CREATE DATABASE "role_assignment" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
              CREATE DATABASE "ts_translation_service" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
    definitionStore:
      enabled: true
    adminWeb:
      enabled: true

  ccd-definition-store-api:
    java:
      ingressHost: ${SERVICE_FQDN}-ccd-definition-store.preview.platform.hmcts.net
      image: hmctspublic.azurecr.io/ccd/definition-store-api:pr-1386-f6ed51d-20230829104932
      environment:
        TS_TRANSLATION_SERVICE_HOST: https://ts-translation-service-pr-226.preview.platform.hmcts.net
        ELASTIC_SEARCH_FAIL_ON_IMPORT: false
        IDAM_USER_URL: https://idam-web-public.aat.platform.hmcts.net
        IDAM_S2S_URL: http://rpe-service-auth-provider-aat.service.core-compute-aat.internal
        USER_PROFILE_HOST: http://ccd-user-profile-api-aat.service.core-compute-aat.internal
        OIDC_ISSUER: https://forgerock-am.service.core-compute-idam-aat.internal:8443/openam/oauth2/hmcts
       
  ccd-admin-web:
    nodejs:
      ingressHost:  ${SERVICE_FQDN}-ccd-admin-web.preview.platform.hmcts.net
      image: hmctspublic.azurecr.io/ccd/admin-web:pr-582-ff6134d-20230829130829
      environment:
        ADMINWEB_GET_DICTIONARY_URL: https://ts-translation-service-pr-226.preview.platform.hmcts.net/dictionary
        ADMINWEB_IMPORT_URL: https://ts-translation-service-pr-226-ccd-definition-store.preview.platform.hmcts.net/import
        ADMINWEB_JURISDICTIONS_URL: https://ts-translation-service-pr-226-ccd-definition-store.preview.platform.hmcts.net/api/data/jurisdictions
        ADMINWEB_USER_ROLE_URL: https://ts-translation-service-pr-226-ccd-definition-store.preview.platform.hmcts.net/api/user-role
        ADMIN_ALL_USER_ROLES_URL: https://ts-translation-service-pr-226-ccd-definition-store.preview.platform.hmcts.net/api/user-roles
        ADMINWEB_CREATE_DEFINITION_URL: https://ts-translation-service-pr-226-ccd-definition-store.preview.platform.hmcts.net/api/draft
        ADMINWEB_UPDATE_DEFINITION_URL: https://ts-translation-service-pr-226-ccd-definition-store.preview.platform.hmcts.net/api/draft/save
        ADMINWEB_DELETE_DEFINITION_URL: https://ts-translation-service-pr-226-ccd-definition-store.preview.platform.hmcts.net/api/draft
        ADMINWEB_DEFINITIONS_URL: https://ts-translation-service-pr-226-ccd-definition-store.preview.platform.hmcts.net/api/drafts
        ADMINWEB_WHOAMI_URL: https://ts-translation-service-pr-226-ccd-definition-store.preview.platform.hmcts.net/api/idam/profile
        ADMINWEB_AUTHORIZATION_URL: https://ts-translation-service-pr-226-ccd-definition-store.preview.platform.hmcts.net/api/idam/adminweb/authorization
        ADMINWEB_IMPORT_AUDITS_URL: https://ts-translation-service-pr-226-ccd-definition-store.preview.platform.hmcts.net/api/import-audits
        ADMINWEB_ELASTIC_INDEX_URL: https://ts-translation-service-pr-226-ccd-definition-store.preview.platform.hmcts.net/elastic-support/index
        ADMINWEB_ELASTIC_CASE_TYPES_URL: https://ts-translation-service-pr-226-ccd-definition-store.preview.platform.hmcts.net/elastic-support/case-types
        ADMINWEB_GLOBAL_SEARCH_INDEX_URL: https://ts-translation-service-pr-226-ccd-definition-store.preview.platform.hmcts.net/elastic-support/global-search/index
   
