java:
  # Don't modify below here
  image: ${IMAGE_NAME}
  ingressHost: ${SERVICE_FQDN}
  environment:
    TS_TRANSLATION_SERVICE_DB_HOST: "{{ .Release.Name }}-postgresql"
    TS_TRANSLATION_SERVICE_DB_NAME: "{{ .Values.postgresql.auth.database}}"
    TS_TRANSLATION_SERVICE_DB_USERNAME: "{{ .Values.postgresql.auth.username}}"
    TS_TRANSLATION_SERVICE_DB_PASSWORD: "{{ .Values.postgresql.auth.password}}"
    TS_TRANSLATION_SERVICE_DB_OPTIONS: "?stringtype=unspecified"
    TS_TRANSLATION_SERVICE_DB_PORT: 5432
    TESTING_SUPPORT_ENABLED: true
  postgresql:
    enabled: true
    image:
      tag: '11.16.0'
    auth:
      username: hmcts
      password: hmcts
      database: ccd
    ## Disable Postgres Persistence
    primary:
      persistence:
        enabled: false
      resources:
        requests:
          cpu: 25m
      initdb:
        scripts:
          init.sql: |
            CREATE DATABASE "data-store" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
            CREATE DATABASE "definition-store" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
            CREATE DATABASE "user-profile" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
            CREATE DATABASE "draftstore" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
            CREATE DATABASE "payment" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
            CREATE DATABASE "evidence" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
            CREATE DATABASE "annotation" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
            CREATE DATABASE "role_assignment" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;
            CREATE DATABASE "ts_translation_service" WITH OWNER = hmcts ENCODING = 'UTF-8' CONNECTION LIMIT = -1;

  keyVaults:
    ts:
      resourceGroup: ts-shared
      secrets:
        - name: AppInsightsInstrumentationKey
        - name: ts-translation-service-s2s-secret
          alias: IDAM_KEY_TS_TRANSLATION_SERVICE

ccd:
  enabled: true
  ras:
    enabled: false
  userProfile:
    enabled: false
  postgresql:
    enabled: false
  definitionStore:
    enabled: true
    java:
      ingressHost: ccd-definition-store-api.{{ .Values.global.environment }}.platform.hmcts.net
      image: hmctspublic.azurecr.io/ccd/definition-store-api:pr-1386-bbc96c3-20230726142127
      environment:
        TS_TRANSLATION_SERVICE_HOST: https://ts-translation-service-pr-226.preview.platform.hmcts.net
  adminWeb:
    enabled: true
    java:
      ingressHost: ccd-admin-web.{{ .Values.global.environment }}.platform.hmcts.net
      image: hmctspublic.azurecr.io/ccd/admin-web:pr-582-fecab3e-20230801134604
      environment:
        ADMINWEB_GET_DICTIONARY_URL: https://ts-translation-service-pr-226.preview.platform.hmcts.net/dictionary
  definitionImporter:
    enabled: true
  userProfileImporter:
    enabled: true
